# Migration System Configuration
migration.enabled=true
migration.environment=development
migration.auto-migrate=false
migration.validate-before-migration=true
migration.backup-before-migration=true
migration.retry-count=3
migration.backup-retention-days=30

# Development Environment
migration.development.auto-migrate=false
migration.development.require-approval=false
migration.development.max-concurrent-migrations=1
migration.development.backup-before-migration=true
migration.development.allowed-migration-types=DDL,DML,INDEX,PROCEDURE,TRIGGER,VIEW,DATA_MIGRATION

# Staging Environment
migration.staging.auto-migrate=false
migration.staging.require-approval=true
migration.staging.max-concurrent-migrations=1
migration.staging.backup-before-migration=true
migration.staging.allowed-migration-types=DDL,DML,INDEX

# Production Environment
migration.production.auto-migrate=false
migration.production.require-approval=true
migration.production.max-concurrent-migrations=1
migration.production.backup-before-migration=true
migration.production.allowed-migration-types=DDL,DML,INDEX

# Migration Paths
migration.migration-path=classpath:db/migration
migration.rollback-path=classpath:db/rollback

# Actuator Configuration
management.endpoints.web.exposure.include=health,info,metrics,migration
management.endpoint.health.show-details=always
management.endpoint.migration.enabled=true

# Logging
logging.level.com.elearning.elearning_backend.migration=DEBUG
logging.level.org.flyway=INFO

# Custom Migration Metrics
management.metrics.export.prometheus.enabled=true
management.metrics.tags.environment=${migration.environment}
management.metrics.tags.application=elearning-migration

# Logging Configuration for Migration
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# Database Connection Pool for Migrations
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# Transaction Configuration
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true